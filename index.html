<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>KMD Årshjul</title>
  <!-- Hoveddokumentet indlæser vores stilark og JavaScript‑moduler.  -->
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="stylesheet" href="css/glass.css" />
</head>
<body>
  <header class="glass">
    <span class="logo" aria-label="KMD"></span>
    <h1>KMD Årshjul</h1>
    <div class="right">
      <a href="dashboard.html" class="ghost" id="btnDashboard">Dashboard</a>
      <button id="btnPdf">Exportér PDF</button>
      <button id="btnShare">Del med kunde</button>
      <button class="ghost" id="btnHelp">Hjælp</button>
    </div>
  </header>
  <main class="wrap">
    <!-- Tilføj aktivitet -->
    <section class="card glass resizable" id="formSection">
      <h3>Tilføj aktivitet</h3>
      <label for="date">Dato
        <input id="date" type="date" />
      </label>
      <label for="title">Aktivitet
        <input id="title" placeholder="Titel på aktiviteten" />
      </label>
      <label for="owner">Ansvarlig
        <input id="owner" placeholder="Navn på ansvarlig person/rolle" />
      </label>
      <label for="category">Kategori
        <select id="category"></select>
      </label>
      <label for="status">Status
        <select id="status">
          <option>Planlagt</option>
          <option>Igangværende</option>
          <option>Afsluttet</option>
        </select>
      </label>
      <label for="files">Vedhæft filer (vises i kundevisning)
        <input id="files" type="file" multiple />
      </label>
      <label for="notes">Noter
        <textarea id="notes" class="notes" placeholder="Detaljer, links, osv."></textarea>
      </label>
      <div class="form-actions">
        <button id="btnSave">Gem</button>
        <button class="ghost" id="btnReset">Nulstil</button>
      </div>
      <div class="chips" id="chips"></div>
    </section>
    <!-- Årshjul -->
    <section class="card glass wheel-wrap resizable">
      <div class="chips" id="filterChips"></div>
      <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-top:6px;">
        <label for="statusFilter" style="font-size:12px;opacity:.9;">Status</label>
        <select id="statusFilter">
          <option value="Alle">Alle</option>
          <option value="Planlagt">Planlagt</option>
          <option value="Igangværende">Igangværende</option>
          <option value="Afsluttet">Afsluttet</option>
        </select>
      </div>
      <svg id="wheel" viewBox="0 0 700 700" aria-label="Årshjul"></svg>
    </section>
    <!-- Liste -->
    <section class="card glass resizable" id="listSection">
      <h3 class="activities-header" style="display:flex;align-items:center;justify-content:space-between;gap:8px;">
        <span>Aktiviteter</span>
        <button class="ghost toggle-btn" id="activitiesToggle" aria-expanded="true" style="padding:4px 10px;display:inline-flex;align-items:center;gap:6px;">
          <span class="chev" aria-hidden="true" style="display:inline-block;transform:rotate(0deg);transition:transform .2s ease;">▾</span>
          <span class="label">Skjul</span>
        </button>
      </h3>
      <div class="chips" id="listFilters"></div>
      <div id="activitiesBody" class="collapse-wrap">
        <div id="list" class="list"></div>
      </div>
    </section>
  </main>
  <!-- Månedsmodal -->
  <div class="modal" id="monthModal">
    <div class="sheet glass">
      <h2 id="modalTitle"></h2>
      <div id="modalActs" class="list"></div>
      <h3>Månedsnoter</h3>
      <textarea id="monthNotes" class="notes"></textarea>
      <div class="modal-actions">
        <button id="btnSaveNotes">Gem noter</button>
        <button class="ghost" id="btnCloseModal">Luk</button>
      </div>
    </div>
  </div>

  <!-- Del med kunde modal -->
  <div class="modal" id="shareModal">
    <div class="sheet glass">
      <h2>Del med kunde</h2>
      <p>Vælg hvordan du vil dele årshjulet med kunden.</p>
      <div class="modal-actions">
        <button id="btnSharePdf">Åbn kundevisning som PDF</button>
        <button class="ghost" id="btnShareLink">Åbn kundevisning</button>
        <button class="ghost" id="btnShareCopy">Kopier link</button>
        <button class="ghost" id="btnShareClose">Luk</button>
      </div>
    </div>
  </div>
  <!-- Onboarding modal -->
  <div class="modal" id="helpModal">
    <div class="sheet glass">
      <h2>Hjælp & Onboarding</h2>
      <input id="helpSearch" placeholder="Søg efter funktion eller widget..." />
      <div style="display:grid;grid-template-columns: 0.6fr 1.4fr; gap: 12px; min-height: 260px;">
        <div id="helpList" class="calendar-view" style="overflow:auto;"></div>
        <div id="helpDetail" class="calendar-view" style="overflow:auto; padding:12px;"></div>
      </div>
      <div class="modal-actions">
        <button class="ghost" id="btnCloseHelp">Luk</button>
      </div>
    </div>
  </div>
  <!-- Template til listeelement -->
  <template id="itemTemplate">
    <div class="item glass" draggable="true">
      <div class="item-content">
        <strong class="title"></strong>
        <div class="meta"></div>
        <div class="note"></div>
      </div>
      <div class="actions">
        <button class="ghost" data-act="edit">Redigér</button>
        <button data-act="del">Slet</button>
      </div>
    </div>
  </template>
  <!-- JavaScript modules -->
  <script defer src="js/particles.js"></script>
  <script type="module" src="js/main.js"></script>
  <div id="toastContainer" aria-live="polite" aria-atomic="true"></div>
</body>
</html>
